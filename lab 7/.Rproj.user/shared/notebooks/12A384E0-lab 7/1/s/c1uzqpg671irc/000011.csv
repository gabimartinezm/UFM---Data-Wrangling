"0","str(data)"
"1","spc_tbl_ [263,725 Ã— 28]"
"1",""
"1"," (S3: "
"1",""
"1","spec_tbl_df/tbl_df/tbl/data.frame"
"1",""
"1",")"
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","Fecha          "
"1",""
"1",":"
"1"," chr [1:263725] "
"1",""
"1","""10-12-17"" ""19-03-17"" ""13-03-17"" ""14-04-17"""
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","ID             "
"1",""
"1",":"
"1"," num [1:263725] "
"1",""
"1","368224 368224 368224 368224 748633"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","Camion_5       "
"1",""
"1",":"
"1"," chr [1:263725] "
"1",""
"1","""Q-"" ""Q-"" ""Q-"" ""Q-"""
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","Pickup         "
"1",""
"1",":"
"1"," chr [1:263725] "
"1",""
"1","""Q270.72"" ""Q262.24"" ""Q230.04"" ""Q268.77"""
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","Moto           "
"1",""
"1",":"
"1"," chr [1:263725] "
"1",""
"1","""Q-"" ""Q-"" ""Q-"" ""Q-"""
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","Cod            "
"1",""
"1",":"
"1"," chr [1:263725] "
"1",""
"1","""VERIFICACION_MEDIDORES"" ""REVISION_TRANSFORMADOR"" ""REVISION"" ""REVISION"""
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","origen         "
"1",""
"1",":"
"1"," num [1:263725] "
"1",""
"1","150277 150277 150277 150224 150277"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","Lat            "
"1",""
"1",":"
"1"," num [1:263725] "
"1",""
"1","15.5 15.5 15.5 15.5 14.7"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","Long           "
"1",""
"1",":"
"1"," num [1:263725] "
"1",""
"1","-89.7 -89.7 -89.7 -89.7 -90.9"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","factura        "
"1",""
"1",":"
"1"," chr [1:263725] "
"1",""
"1","""Q316.72"" ""Q267.24"" ""Q236.04"" ""Q289.77"""
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","directoCamion_5"
"1",""
"1",":"
"1"," chr [1:263725] "
"1",""
"1","""Q-"" ""Q-"" ""Q-"" ""Q-"""
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","directoPickup  "
"1",""
"1",":"
"1"," chr [1:263725] "
"1",""
"1","""Q167.85"" ""Q173.08"" ""Q135.72"" ""Q174.70"""
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","directoMoto    "
"1",""
"1",":"
"1"," chr [1:263725] "
"1",""
"1","""Q-"" ""Q-"" ""Q-"" ""Q-"""
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","fijoCamion_5   "
"1",""
"1",":"
"1"," chr [1:263725] "
"1",""
"1","""Q-"" ""Q-"" ""Q-"" ""Q-"""
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","fijoPickup     "
"1",""
"1",":"
"1"," chr [1:263725] "
"1",""
"1","""Q102.87"" ""Q89.16"" ""Q94.32"" ""Q94.07"""
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","fijoMoto       "
"1",""
"1",":"
"1"," chr [1:263725] "
"1",""
"1","""Q-"" ""Q-"" ""Q-"" ""Q-"""
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","height         "
"1",""
"1",":"
"1"," num [1:263725] "
"1",""
"1","8 8 8 8 8 12 12 12 10 8"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","5-30           "
"1",""
"1",":"
"1"," chr [1:263725] "
"1",""
"1","NA NA NA NA"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","30-45          "
"1",""
"1",":"
"1"," chr [1:263725] "
"1",""
"1","NA NA NA NA"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","45-75          "
"1",""
"1",":"
"1"," chr [1:263725] "
"1",""
"1","NA NA NA NA"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","75-120         "
"1",""
"1",":"
"1"," chr [1:263725] "
"1",""
"1","NA NA NA NA"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","120+           "
"1",""
"1",":"
"1"," chr [1:263725] "
"1",""
"1","""x"" ""x"" ""x"" ""x"""
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","...23          "
"1",""
"1",":"
"1"," logi [1:263725] "
"1",""
"1","NA NA NA NA NA NA"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","...24          "
"1",""
"1",":"
"1"," logi [1:263725] "
"1",""
"1","NA NA NA NA NA NA"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","...25          "
"1",""
"1",":"
"1"," logi [1:263725] "
"1",""
"1","NA NA NA NA NA NA"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","...26          "
"1",""
"1",":"
"1"," logi [1:263725] "
"1",""
"1","NA NA NA NA NA NA"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","...27          "
"1",""
"1",":"
"1"," logi [1:263725] "
"1",""
"1","NA NA NA NA NA NA"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","...28          "
"1",""
"1",":"
"1"," logi [1:263725] "
"1",""
"1","NA NA NA NA NA NA"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","- attr(*, ""spec"")="
"1","
"
"1",""
"1","  .. cols(
  ..   Fecha = [31mcol_character()[39m,
  ..   ID = [32mcol_double()[39m,
  ..   Camion_5 = [31mcol_character()[39m,
  ..   Pickup = [31mcol_character()[39m,
  ..   Moto = [31mcol_character()[39m,
  ..   Cod = [31mcol_character()[39m,
  ..   origen = [32mcol_double()[39m,
  ..   Lat = [32mcol_double()[39m,
  ..   Long = [32mcol_double()[39m,
  ..   factura = [31mcol_character()[39m,
  ..   directoCamion_5 = [31mcol_character()[39m,
  ..   directoPickup = [31mcol_character()[39m,
  ..   directoMoto = [31mcol_character()[39m,
  ..   fijoCamion_5 = [31mcol_character()[39m,
  ..   fijoPickup = [31mcol_character()[39m,
  ..   fijoMoto = [31mcol_character()[39m,
  ..   height = [32mcol_double()[39m,
  ..   `5-30` = [31mcol_character()[39m,
  ..   `30-45` = [31mcol_character()[39m,
  ..   `45-75` = [31mcol_character()[39m,
  ..   `75-120` = [31mcol_character()[39m,
  ..   `120+` = [31mcol_character()[39m,
  ..   ...23 = [33mcol_logical()[39m,
  ..   ...24 = [33mcol_logical()[39m,
  ..   ...25 = [33mcol_logical()[39m,
  ..   ...26 = [33mcol_logical()[39m,
  ..   ...27 = [33mcol_logical()[39m,
  ..   ...28 = [33mcol_logical()[39m
  .. )"
"1",""
"1","
"
"1"," "
"1",""
"1","- attr(*, ""problems"")="
"1","<externalptr> "
"1",""
"1",""
"1",""
"1","
"
"0","#las columnas del final parecieran no tener nada por lo que se dropean"
"0","sum(is.na(data$...23))"
"1","[1]"
"1"," 263725"
"1","
"
"0","sum(is.na(data$...24))"
"1","[1]"
"1"," 263725"
"1","
"
"0","sum(is.na(data$...25))"
"1","[1]"
"1"," 263725"
"1","
"
"0","sum(is.na(data$...26))"
"1","[1]"
"1"," 263725"
"1","
"
"0","sum(is.na(data$...27))"
"1","[1]"
"1"," 263725"
"1","
"
"0","sum(is.na(data$...28))"
"1","[1]"
"1"," 263725"
"1","
"
"0","data <- data %>% "
"0","  select(-c(...23, ...24, ...25, ...26, ...27, ...28))"
"0",""
"0","#pasar la fecha a formato de fecha"
"0","data <- data %>% "
"0","  mutate(Fecha = dmy(Fecha))"
"0",""
"0","str(data)"
"1","tibble [263,725 Ã— 22]"
"1",""
"1"," (S3: "
"1",""
"1","tbl_df/tbl/data.frame"
"1",""
"1",")"
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","Fecha          "
"1",""
"1",":"
"1"," "
"1",""
"1","Date"
"1",""
"1","[1:263725]"
"1",""
"1",", format: "
"1",""
"1","""2017-12-10"" ""2017-03-19"" ""2017-03-13"""
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","ID             "
"1",""
"1",":"
"1"," num [1:263725] "
"1",""
"1","368224 368224 368224 368224 748633"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","Camion_5       "
"1",""
"1",":"
"1"," chr [1:263725] "
"1",""
"1","""Q-"" ""Q-"" ""Q-"" ""Q-"""
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","Pickup         "
"1",""
"1",":"
"1"," chr [1:263725] "
"1",""
"1","""Q270.72"" ""Q262.24"" ""Q230.04"" ""Q268.77"""
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","Moto           "
"1",""
"1",":"
"1"," chr [1:263725] "
"1",""
"1","""Q-"" ""Q-"" ""Q-"" ""Q-"""
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","Cod            "
"1",""
"1",":"
"1"," chr [1:263725] "
"1",""
"1","""VERIFICACION_MEDIDORES"" ""REVISION_TRANSFORMADOR"" ""REVISION"" ""REVISION"""
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","origen         "
"1",""
"1",":"
"1"," num [1:263725] "
"1",""
"1","150277 150277 150277 150224 150277"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","Lat            "
"1",""
"1",":"
"1"," num [1:263725] "
"1",""
"1","15.5 15.5 15.5 15.5 14.7"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","Long           "
"1",""
"1",":"
"1"," num [1:263725] "
"1",""
"1","-89.7 -89.7 -89.7 -89.7 -90.9"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","factura        "
"1",""
"1",":"
"1"," chr [1:263725] "
"1",""
"1","""Q316.72"" ""Q267.24"" ""Q236.04"" ""Q289.77"""
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","directoCamion_5"
"1",""
"1",":"
"1"," chr [1:263725] "
"1",""
"1","""Q-"" ""Q-"" ""Q-"" ""Q-"""
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","directoPickup  "
"1",""
"1",":"
"1"," chr [1:263725] "
"1",""
"1","""Q167.85"" ""Q173.08"" ""Q135.72"" ""Q174.70"""
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","directoMoto    "
"1",""
"1",":"
"1"," chr [1:263725] "
"1",""
"1","""Q-"" ""Q-"" ""Q-"" ""Q-"""
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","fijoCamion_5   "
"1",""
"1",":"
"1"," chr [1:263725] "
"1",""
"1","""Q-"" ""Q-"" ""Q-"" ""Q-"""
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","fijoPickup     "
"1",""
"1",":"
"1"," chr [1:263725] "
"1",""
"1","""Q102.87"" ""Q89.16"" ""Q94.32"" ""Q94.07"""
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","fijoMoto       "
"1",""
"1",":"
"1"," chr [1:263725] "
"1",""
"1","""Q-"" ""Q-"" ""Q-"" ""Q-"""
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","height         "
"1",""
"1",":"
"1"," num [1:263725] "
"1",""
"1","8 8 8 8 8 12 12 12 10 8"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","5-30           "
"1",""
"1",":"
"1"," chr [1:263725] "
"1",""
"1","NA NA NA NA"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","30-45          "
"1",""
"1",":"
"1"," chr [1:263725] "
"1",""
"1","NA NA NA NA"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","45-75          "
"1",""
"1",":"
"1"," chr [1:263725] "
"1",""
"1","NA NA NA NA"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","75-120         "
"1",""
"1",":"
"1"," chr [1:263725] "
"1",""
"1","NA NA NA NA"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","120+           "
"1",""
"1",":"
"1"," chr [1:263725] "
"1",""
"1","""x"" ""x"" ""x"" ""x"""
"1",""
"1"," ..."
"1",""
"1","
"
"0","#pasar las columnas de costo y tipo de vehiculo a formato tidy para poder trabajar mÃ¡s facil con ellas"
"0",""
"0","camion <- data %>% "
"0","  filter(directoCamion_5 != ""Q-"") %>% "
"0","  mutate(vehiculo = ""camion"","
"0","         costo_total = Camion_5,"
"0","         costo_directo = directoCamion_5,"
"0","         costo_fijo = fijoCamion_5) %>% "
"0","  select(ID, factura, Fecha, vehiculo, costo_total, costo_directo, costo_fijo)"
"0",""
"0","pickup <- data %>% "
"0","  filter(directoPickup != ""Q-"" ) %>% "
"0","  mutate(vehiculo = ""pickup"","
"0","         costo_total = Pickup,"
"0","         costo_directo = directoPickup,"
"0","         costo_fijo = fijoPickup) %>% "
"0","  select(ID, factura, Fecha, vehiculo, costo_total, costo_directo, costo_fijo)"
"0",""
"0","moto <- data %>% "
"0","  filter(directoMoto != ""Q-"" ) %>% "
"0","  mutate(vehiculo = ""moto"","
"0","         costo_total = Moto,"
"0","         costo_directo = directoMoto,"
"0","         costo_fijo = fijoMoto) %>% "
"0","  select(ID, factura, Fecha, vehiculo, costo_total, costo_directo, costo_fijo)"
"0",""
"0","data[ , c(""costo_total"", ""costo_directo"", ""costo_fijo"")] <- NA"
"0",""
"0","#--camion--"
"0","data <- left_join(data, camion, by = c(""ID"", ""factura"", ""Fecha""))"
"0",""
"0","data <- data %>% "
"0","  mutate("
"0","    costo_total = coalesce(costo_total.x, costo_total.y),"
"0","    costo_directo = coalesce(costo_directo.x, costo_directo.y),"
"0","    costo_fijo = coalesce(costo_fijo.x, costo_fijo.y)"
"0","  ) %>% "
"0","  select(-c(costo_total.x, costo_total.y, costo_directo.x, "
"0","            costo_directo.y, costo_fijo.x,costo_fijo.y)) "
"0",""
"0","#--pickup--"
"0","data <- left_join(data, pickup, by = c(""ID"", ""factura"", ""Fecha""))"
"0",""
"0","data <- data %>% "
"0","  mutate("
"0","    costo_total = coalesce(costo_total.x, costo_total.y),"
"0","    costo_directo = coalesce(costo_directo.x, costo_directo.y),"
"0","    costo_fijo = coalesce(costo_fijo.x, costo_fijo.y),"
"0","    vehiculo = coalesce(vehiculo.x, vehiculo.y)"
"0","  ) %>% "
"0","  select(-c(costo_total.x, costo_total.y, costo_directo.x, "
"0","            costo_directo.y, costo_fijo.x,costo_fijo.y, vehiculo.x, vehiculo.y))"
"0",""
"0","#--moto--"
"0","data <- left_join(data, moto, by = c(""ID"", ""factura"", ""Fecha""))"
"0",""
"0","data <- data %>% "
"0","  mutate("
"0","    costo_total = coalesce(costo_total.x, costo_total.y),"
"0","    costo_directo = coalesce(costo_directo.x, costo_directo.y),"
"0","    costo_fijo = coalesce(costo_fijo.x, costo_fijo.y),"
"0","    vehiculo = coalesce(vehiculo.x, vehiculo.y)"
"0","  ) %>% "
"0","  select(-c(costo_total.x, costo_total.y, costo_directo.x, "
"0","            costo_directo.y, costo_fijo.x,costo_fijo.y, vehiculo.x, vehiculo.y))"
"0",""
"0","#--drop las que ya no necesito"
"0","data <- data %>% "
"0","  select(-c(Camion_5, Pickup, Moto, directoCamion_5, directoPickup, directoMoto,"
"0","            fijoCamion_5, fijoPickup, fijoMoto))"
"0",""
"0","# agregar las categorias de tiempo "
"0","data[ , ""cat_tiempo""] <- NA"
"0",""
"0","data <- data %>% "
"0","  mutate(cat_tiempo = ifelse(!is.na(`5-30`), ""breve"","
"0","                     ifelse(!is.na(`30-45`), ""corto"","
"0","                        ifelse(!is.na(`45-75`), ""moderado"","
"0","                           ifelse(!is.na(`75-120`), ""largo"","
"0","                              ifelse(!is.na(`120+`), ""extendido"", NA))))))"
"0",""
"0","data <- data %>% "
"0","  select(-c(`5-30`, `30-45`, `45-75`, `75-120`, `120+`))"
"0",""
"0","# pasar los numeros conn Q a algo que no sea character y el origen para que si sea character"
"0","data <- data %>% "
"0","  mutate(factura = currency(factura, ""Q""),"
"0","         costo_total = currency(costo_total, ""Q""),"
"0","         costo_directo = currency(costo_directo, ""Q""),"
"0","         costo_fijo = currency(costo_fijo, ""Q""),"
"0","         origen = as.character(origen))"
"0","  "
